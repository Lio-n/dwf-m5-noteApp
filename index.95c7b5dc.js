function t(t,e,n,s){Object.defineProperty(t,e,{get:n,set:s,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=e.parcelRequire5946;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in s){var e=s[t];delete s[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){s[t]=e},e.parcelRequire5946=i),i.register("7PhYn",(function(e,n){var s,i;t(e.exports,"resolve",(()=>s),(t=>s=t)),t(e.exports,"register",(()=>i),(t=>i=t));var r={};i=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)r[e[n]]=t[e[n]]},s=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),i("7PhYn").register(JSON.parse('{"di8mO":"index.95c7b5dc.js","fYsRF":"trash-icon.afb2ef45.svg"}'));class r extends HTMLElement{constructor(){super(),this.tags=["h1","p"],this.tag="p",this.shadow=this.attachShadow({mode:"open"}),this.tags.includes(this.getAttribute("tag"))&&(this.tag=this.getAttribute("tag")||this.tag),this.render()}render(){const t=document.createElement(this.tag);t.textContent=this.textContent,this.shadow.appendChild(t)}}customElements.define("my-text",r);var o;i.register("kVZsc",(function(e,n){var s;t(e.exports,"getBundleURL",(()=>s),(t=>s=t));var i={};function r(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}s=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return r(t[2])}return"/"}(),i[t]=e),e}})),o=i("kVZsc").getBundleURL("di8mO")+i("7PhYn").resolve("fYsRF"),customElements.define("todo-item",class extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.title=this.getAttribute("title")||"",this.id=this.getAttribute("id"),this.checked=this.hasAttribute("checked");const t=document.createElement("style");t.innerHTML="*{margin:0;padding:0;box-sizing: border-box;}\n      .root {\n        display: flex;\n        justify-content: space-between;\n        border-radius: 4px;\n        word-break: break-word;\n        padding: 22px 13px;\n        width: 302px;\n        min-height: 120px;\n        background-color: #fff599;\n        font-size: 18px;\n      }\n      .root > div{\n        padding-left: 1rem;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: space-between;\n        width: 35px;\n      }\n      h4{\n        font-weight: 400;\n      }\n      .border{\n        border: solid 2px;\n      }\n      .title.checked {\n        text-decoration: line-through;\n      }\n      .trash{\n        cursor: pointer;\n        display: none;\n      }\n      .open{\n        display: initial;\n      }\n      ",this.shadow.appendChild(t),this.render()}addListeners(){this.shadow.querySelector(".checkbox-input").addEventListener("click",(t=>{const e=t.target,n=new CustomEvent("change",{detail:{id:this.id,value:e.checked}});this.dispatchEvent(n)}));const t=this.shadow.querySelector(".trash");t.addEventListener("click",(()=>{const t=new CustomEvent("delete",{detail:{id:this.id}});this.dispatchEvent(t)}));const e=this.shadow.querySelector(".root");let n=!1;this.shadow.querySelector(".root").addEventListener("click",(()=>{n?(t.classList.remove("open"),e.classList.remove("border"),n=!1):(t.classList.add("open"),console.log("rootEl",e),e.classList.add("border"),n=!0)}))}render(){const t=document.createElement("div");t.innerHTML=`\n        <div class="root">\n            <h4 class="title ${this.checked?"checked":""}">${this.title}</h4>\n            <div>\n                <input class="checkbox-input" type="checkbox" ${this.checked?"checked":""}>\n                <img class="trash" src="${o}"/>\n            </div>\n        </div>\n    `,this.shadow.appendChild(t),this.addListeners()}});const a={data:{tasks:[]},listeners:[],init(){const t=JSON.parse(localStorage.getItem("saved-state"));t&&this.setState(t)},getState(){return this.data},setState(t){this.data=t;for(const e of this.listeners)e(t);localStorage.setItem("saved-state",JSON.stringify(t))},getEnabledTasks(){const t=this.getState();return console.log("currentState",t),t.tasks.filter((t=>!t.deleted))},addTasks(t,e){const n=this.getState();n.tasks.push({id:t,title:e,completed:!1,deleted:!1}),this.setState(n)},deleteTask(t){const e=this.getState();e.tasks.find((e=>e.id==t)).deleted=!0,this.setState(e)},changeItemState(t,e){const n=this.getState();n.tasks.find((e=>e.id==t)).completed=e,this.setState(n)},subscribe(t){this.listeners.push(t)}};a.init(),(t=>{const e=document.createElement("div"),n=a.getEnabledTasks();e.innerHTML='\n  <h1>Mis pendientes</h1>\n  <form class="form">\n      <label class="form__subtitle" for="input">Nuevo pendiente</label>\n      <input class="form__input" type="text" id="input" />\n      <button class="form__button add-button">Agregar Item</button>\n  </form>\n  <ul class="lista"></ul>';const s=e.querySelector(".lista"),i=t=>{s.innerHTML="";for(const e of t){const t=document.createElement("todo-item");t.setAttribute("id",e.id),t.setAttribute("title",e.title),e.completed&&t.setAttribute("checked","true"),t.addEventListener("delete",(t=>{a.deleteTask(t.detail.id)})),t.addEventListener("change",(t=>{a.changeItemState(t.detail.id,t.detail.value)})),s.appendChild(t)}};a.subscribe((()=>{i(a.getEnabledTasks())})),i(n);const r=e.querySelector(".form__input");e.querySelector(".add-button").addEventListener("click",(t=>{t.preventDefault(),""!=r.value&&(a.addTasks(Math.random(),r.value),r.value="")})),t.appendChild(e)})(document.querySelector(".root"));
//# sourceMappingURL=index.95c7b5dc.js.map
